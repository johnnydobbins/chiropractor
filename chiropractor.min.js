/*! chiropractor 0.1.0 (2013-07-31) */
define("chiropractor/views",["require","underscore","jquery","backbone","handlebars"],function(a){var b,c=a("underscore"),d=a("jquery"),e=a("backbone"),f=a("handlebars");return d.event.special.remove||(d.event.special.remove={remove:function(a){a.handler&&a.handler()}}),b=e.View.extend({initialize:function(a){a=a||{},e.View.prototype.initialize.call(this,a),c.bindAll(this,"remove"),this._childViews=[],this._context=a.context||{},this.$el.on("remove",this.remove)},_addChild:function(a){this._childViews.push(a)},context:function(){return{model:this.model,collection:this.collection}},render:function(){var a="string"==typeof this.template?f.compile(this.template):this.template,b="function"==typeof this.context?this.context():this.context;return b.declaringView=this,c.defaults(b,this._context),a&&this.$el.html(a(b)),c(this._childViews).each(function(a){this.$("#chiropractorId"+a.cid).replaceWith(a.el)},this),this},remove:function(){this.$el.off("remove",this.remove),c(this._childViews).each(function(a){a.remove()}),this._childViews=[],e.View.prototype.remove.apply(this,arguments)}}),{Base:b}}),define("chiropractor/models/auth",["require","backbone","jquery","underscore","jquery.cookie"],function(a){var b,c,d,e,f,g,h=a("backbone"),i=a("jquery"),j=a("underscore"),k="wttoken",l=2,m=!1;return a("jquery.cookie"),c=function(){h.Events.trigger("authentication:expiration"),m=!0,b=setTimeout(function(){h.Events.trigger("authentication:failure")},1e3*60*l)},e=function(){return"undefined"==typeof d&&(d=i.cookie(k)),d},f=function(a){var e=a.split("::"),f=e[1],g=e[2],j=1e3*Math.max(0,g-f-60*l);d=a,i.cookie(k,a),b&&clearTimeout(b),m&&(h.Events.trigger("authentication:renewal"),m=!1),b=setTimeout(c,j)},g=function(){d=void 0,i.removeCookie(k),b&&clearTimeout(b)},h.Events.on("authentication:logout authentication:failure",g),{sync:function(a,b,c){var d=c.beforeSend,g=c.error,i=c.success,k=this,l=j(c).clone();c.success=function(a,b,c){var d=c.getResponseHeader("Authorization");return d&&f(d),i.apply(k,arguments)},c.error=function(c){return 400===c.status&&h.Events.trigger("authentication:failure",k,c),401===c.status&&(h.Events.trigger("authentication:failure",k,c),k.listenToOnce(h.Events,"authentication:success",function(){k.sync(a,b,l)})),g?g.apply(k,arguments):void 0},c.beforeSend=function(a){var b=e();return!k.disableAuthToken&&b&&a.setRequestHeader("Authorization",b),d?d.apply(this,arguments):void 0}},cleanup:g}}),define("chiropractor/models",["require","backbone","underscore","./models/auth"],function(a){var b,c=a("backbone"),d=a("underscore"),e=a("./models/auth");return b=c.Model.extend({sync:function(a,b,d){return e.sync.call(this,a,b,d),c.Model.prototype.sync.call(this,a,b,d)},parse:function(a,b){return a.data&&a.meta?parseInt(a.meta.status,10)>=400?(b.legacyError=!0,a.meta.errors&&a.meta.errors.form?(this.validationError=a.meta.errors.form,this.trigger("invalid",this,this.validationError,d.extend(b||{},{validationError:this.validationError}))):(this.trigger("error",this,a.data,b),b.error&&b.error(this,a.data,b)),{}):a.data:c.Model.prototype.parse.apply(this,arguments)},set:function(a,b){return b&&b.legacyError?(delete b.legacyError,!1):c.Model.prototype.set.apply(this,arguments)}}),{Base:b,cleanup:e.cleanup}}),define("chiropractor/collections",["require","backbone"],function(a){var b,c=a("backbone");return b=c.Collection.extend({}),{Base:b}}),define("chiropractor/routers",["require","backbone"],function(a){var b,c=a("backbone");return b=c.Router.extend({}),{Base:b}}),define("chiropractor/hbs/view",["require","underscore","backbone","handlebars"],function(a){var b=(a("underscore"),a("backbone"),a("handlebars"));b.registerHelper("view",function(){var c,d,e,f,g,h,i;return e=arguments[arguments.length-1],h=arguments[1]||{},"string"==typeof arguments[0]?(i=arguments[0].split("|"),f=i[0],g=i[1],c=a(f),"string"==typeof g&&(c=c[g])):c=arguments[0],d=new c(h).render(),this.declaringView._addChild(d),new b.SafeString("<"+d.el.tagName+' id="chiropractorId'+d.cid+'">'+"</div>")})}),define("chiropractor/hbs",["require","./hbs/view"],function(a){a("./hbs/view")}),define("chiropractor/main",["require","backbone","backbone.subroute","./views","./models","./collections","./routers","./hbs"],function(a){var b=a("backbone"),c=a("backbone.subroute"),d=a("./views").Base,e=a("./models").Base,f=a("./collections").Base,g=a("./routers").Base;return a("./hbs"),{Collection:f,Events:b.Events,history:b.history,Model:e,Router:g,SubRoute:c,View:d}}),define("chiropractor",["chiropractor/main"],function(a){return a});